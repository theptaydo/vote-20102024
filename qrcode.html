<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="button.css">
  <title>Document</title>
</head>

<style>
  #content {
    display: block;
  }

  h1 {
    text-align: center;
  }

  #done {
    height: 100vh;
    display: none;
    justify-content: center;
    align-items: center;
  }

  img {
    width: 100%;
  }
</style>

<body>
  <div id="content">
    <section class="radio-section">
      <div class="radio-list">
        <h1>Chấm điểm phần thi Trang trí bánh kem 20/11</h1>
        <h5>Quý anh/chị vui lòng bình chọn đội mình cho là xuất sắc nhất theo thang điểm từ 1-5</h5>
        <br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/1.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team1-radio1" name="team1" type="radio" value="1"><label
              for="team1-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio2" name="team1" type="radio" value="2"><label
              for="team1-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio3" name="team1" type="radio" value="3"><label
              for="team1-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/2.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team2-radio1" name="team2" type="radio" value="1"><label
              for="team2-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team2-radio2" name="team2" type="radio" value="2"><label
              for="team2-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team2-radio3" name="team2" type="radio" value="3"><label
              for="team2-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/3.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team3-radio1" name="team3" type="radio" value="1"><label
              for="team3-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team3-radio2" name="team3" type="radio" value="2"><label
              for="team3-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team3-radio3" name="team3" type="radio" value="3"><label
              for="team3-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/4.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team4-radio1" name="team4" type="radio" value="1"><label
              for="team4-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team4-radio2" name="team4" type="radio" value="2"><label
              for="team4-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team4-radio3" name="team4" type="radio" value="3"><label
              for="team4-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>
        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/5.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team5-radio1" name="team5" type="radio" value="1"><label
              for="team5-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team5-radio2" name="team5" type="radio" value="2"><label
              for="team5-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team5-radio3" name="team5" type="radio" value="3"><label
              for="team5-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/6.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team6-radio1" name="team6" type="radio" value="1"><label
              for="team6-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team6-radio2" name="team6" type="radio" value="2"><label
              for="team6-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team6-radio3" name="team6" type="radio" value="3"><label
              for="team6-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/7.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team7-radio1" name="team7" type="radio" value="1"><label
              for="team7-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team7-radio2" name="team7" type="radio" value="2"><label
              for="team7-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team7-radio3" name="team7" type="radio" value="3"><label
              for="team7-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/8.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team8-radio1" name="team8" type="radio" value="1"><label
              for="team8-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team8-radio2" name="team8" type="radio" value="2"><label
              for="team8-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team8-radio3" name="team8" type="radio" value="3"><label
              for="team8-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/9.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team9-radio1" name="team9" type="radio" value="1"><label
              for="team9-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team9-radio2" name="team9" type="radio" value="2"><label
              for="team9-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team9-radio3" name="team9" type="radio" value="3"><label
              for="team9-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/10.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team10-radio1" name="team10" type="radio" value="1"><label
              for="team10-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team10-radio2" name="team10" type="radio" value="2"><label
              for="team10-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team10-radio3" name="team10" type="radio" value="3"><label
              for="team10-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/11.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team11-radio1" name="team11" type="radio" value="1"><label
              for="team11-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team11-radio2" name="team11" type="radio" value="2"><label
              for="team11-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team11-radio3" name="team11" type="radio" value="3"><label
              for="team11-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/12.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team12-radio1" name="team12" type="radio" value="1"><label
              for="team12-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team12-radio2" name="team12" type="radio" value="2"><label
              for="team12-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team12-radio3" name="team12" type="radio" value="3"><label
              for="team12-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/13.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team13-radio1" name="team13" type="radio" value="1"><label
              for="team13-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team13-radio2" name="team13" type="radio" value="2"><label
              for="team13-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team13-radio3" name="team13" type="radio" value="3"><label
              for="team13-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>

        <div class="group">
          <!-- <h2>Đội công ty Chín Rồng</h2>
          <h4>Nguyễn Tấn Điểm, Nguyễn Nhật Tiến, Võ Trung Phục</h4> -->
          <img src="./qr/14.png" alt="" srcset="">
          <br>
          <div class="radio-item"><input id="team14-radio1" name="team14" type="radio" value="1"><label
              for="team14-radio1">1 ĐIỂM</label></div>
          <div class="radio-item"><input id="team14-radio2" name="team14" type="radio" value="2"><label
              for="team14-radio2">2 ĐIỂM</label></div>
          <div class="radio-item"><input id="team14-radio3" name="team14" type="radio" value="3"><label
              for="team14-radio3">3 ĐIỂM</label></div>
          <!-- <div class="radio-item"><input id="team1-radio4" name="team1" type="radio" value="4"><label
              for="team1-radio4">4 ĐIỂM</label></div>
          <div class="radio-item"><input id="team1-radio5" name="team1" type="radio" value="5"><label
              for="team1-radio5">5 ĐIỂM</label></div> -->
        </div><br>
        <br>
        <br>




        <br>
        <br>
        <br>

        <div class="action">
          <button class="button" onclick="submit()">
            <div class="button-overlay"></div>
            <span>Gửi <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 53 58" height="58" width="53">
                <path stroke-width="9" stroke="currentColor"
                  d="M44.25 36.3612L17.25 51.9497C11.5833 55.2213 4.5 51.1318 4.50001 44.5885L4.50001 13.4115C4.50001 6.86824 11.5833 2.77868 17.25 6.05033L44.25 21.6388C49.9167 24.9104 49.9167 33.0896 44.25 36.3612Z">
                </path>
              </svg></span>
          </button>
        </div>


        <br>
        <br>
        <br>

        <hr>
        <br>
        <footer>
          <p>Design by Tran Huu Dang 2024</p>
        </footer>
      </div>


    </section>
  </div>

  <div id="done">
    <h1>Đã gửi bình chọn</h1>
  </div>


  <script>
    const firebaseURL = 'https://music-vote-tsc-default-rtdb.firebaseio.com/qr/-ODErkt3HrfbbiarmRJ3.json'; // URL đến database của bạn
    const done = document.querySelector('#done');

    function submit() {
      // Lấy điểm số từ các input radio của từng đội
      const team1Score = document.querySelector('input[name="team1"]:checked')?.value || 0;
      const team2Score = document.querySelector('input[name="team2"]:checked')?.value || 0;
      const team3Score = document.querySelector('input[name="team3"]:checked')?.value || 0;
      const team4Score = document.querySelector('input[name="team4"]:checked')?.value || 0;
      const team5Score = document.querySelector('input[name="team5"]:checked')?.value || 0;
      const team6Score = document.querySelector('input[name="team6"]:checked')?.value || 0;
      const team7Score = document.querySelector('input[name="team7"]:checked')?.value || 0;
      const team8Score = document.querySelector('input[name="team8"]:checked')?.value || 0;
      const team9Score = document.querySelector('input[name="team9"]:checked')?.value || 0;
      const team10Score = document.querySelector('input[name="team10"]:checked')?.value || 0;
      const team11Score = document.querySelector('input[name="team11"]:checked')?.value || 0;
      const team12Score = document.querySelector('input[name="team12"]:checked')?.value || 0;
      const team13Score = document.querySelector('input[name="team13"]:checked')?.value || 0;
      const team14Score = document.querySelector('input[name="team14"]:checked')?.value || 0;

      const initialData = [
        {
          id: 1,
          img: "./qr/1.png",
          scope: 0,
          votes: ""
        }, {
          id: 2,
          img: "./qr/3.png",
          scope: 0,
          votes: ""
        }, {
          id: 3,
          img: "./qr/3.png",
          scope: 0,
          votes: ""
        }, {
          id: 4,
          img: "./qr/4.png",
          scope: 0,
          votes: ""
        }, {
          id: 5,
          img: "./qr/5.png",
          scope: 0,
          votes: ""
        }, {
          id: 6,
          img: "./qr/6.png",
          scope: 0,
          votes: ""
        }, {
          id: 7,
          img: "./qr/7.png",
          scope: 0,
          votes: ""
        }, {
          id: 8,
          img: "./qr/8.png",
          scope: 0,
          votes: ""
        }, {
          id: 9,
          img: "./qr/9.png",
          scope: 0,
          votes: ""
        }, {
          id: 10,
          img: "./qr/10.png",
          scope: 0,
          votes: ""
        }, {
          id: 11,
          img: "./qr/11.png",
          scope: 0,
          votes: ""
        }, {
          id: 12,
          img: "./qr/12.png",
          scope: 0,
          votes: ""
        }, {
          id: 13,
          img: "./qr/13.png",
          scope: 0,
          votes: ""
        }, {
          id: 14,
          img: "./qr/14.png",
          scope: 0,
          votes: ""
        },
      ];

      let allScores = [
        team1Score, team2Score, team3Score, team4Score, team5Score,
        team6Score, team7Score, team8Score, team9Score, team10Score,
        team11Score, team12Score, team13Score, team14Score
      ];
      if (allScores.some(score => score == 0)) {
        alert('Vui lòng chấm điểm cho tất cả các đội');
        return;
      }
      // Gọi API GET để lấy dữ liệu hiện tại của các đội
      fetch(firebaseURL)
        .then(response => response.json())
        .then(data => {
          console.log(data)
          if (!data) {
            data = initialData; // Sử dụng dữ liệu khởi tạo nếu Firebase trả về null
          }
          data[0].scope += parseInt(team1Score);
          data[1].scope += parseInt(team2Score);
          data[2].scope += parseInt(team3Score);
          data[3].scope += parseInt(team4Score);
          data[4].scope += parseInt(team5Score);
          data[5].scope += parseInt(team6Score);
          data[6].scope += parseInt(team7Score);
          data[7].scope += parseInt(team8Score);
          data[8].scope += parseInt(team9Score);
          data[9].scope += parseInt(team10Score);
          data[10].scope += parseInt(team11Score);
          data[11].scope += parseInt(team12Score);
          data[12].scope += parseInt(team13Score);
          data[13].scope += parseInt(team14Score);

          // Gọi API PUT để cập nhật dữ liệu
          return fetch(firebaseURL, {
            method: 'PUT',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
          });
        })
        .then(() => {
          const content = document.querySelector('#content');
          content.style.display = 'none';
          done.style.display = 'flex';
        })
        .catch(error => {
          console.error('Error updating data:', error);
        });
    }


    // const cons = localStorage.getItem('davis');
    // // Get the full URL (or you can use window.location.search for the query part)
    // const url = new URL(window.location.href);
    // // Create a URLSearchParams object
    // const params = new URLSearchParams(url.search);
    // // Retrieve parameters
    // const clear = params.get('clear');

    // // Convert 'clear' to a boolean
    // if (clear === 'true') {
    //   // If the clear parameter is 'true', execute the following
    //   localStorage.removeItem('davis');
    // }

    // if (cons == 'done') {
    //   const content = document.querySelector('#content');
    //   content.style.display = 'none';
    //   done.style.display = 'flex';
    // }


  </script>
</body>

</html>